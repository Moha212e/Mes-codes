<Window x:Class="voyagoo.GererVoyages"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Gérer les Voyages"
        WindowState="Maximized"
        Background="#FFF0F0F0"
        FontFamily="Segoe UI"
        ResizeMode="CanResize">

    <Grid Margin="5">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <!-- Barre de recherche -->
            <RowDefinition Height="*" />
            <!-- DataGrid -->
            <RowDefinition Height="Auto" />
            <!-- Boutons -->
        </Grid.RowDefinitions>

        <!-- Barre de recherche avec style amélioré -->
        <Border Grid.Row="0"
                Background="White"
                CornerRadius="5"
                Padding="10"
                Margin="5"
                BorderThickness="1"
                BorderBrush="#FFDDDDDD"
                Effect="{StaticResource DropShadowEffect}">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <TextBox x:Name="txtRecherche"
                         Width="250"
                         Height="35"
                         Padding="5"
                         Style="{StaticResource ModernTextBox}"
                         TextChanged="Recherche_TextChanged"
                         Tag="Rechercher..." />
                <Button Width="120"
                        Height="35"
                        Margin="10,0,0,0"
                        Style="{StaticResource PrimaryButton}"
                        Click="Recherche_Click"
                        Content="Rechercher" />
            </StackPanel>
        </Border>

        <!-- DataGrid avec style amélioré -->
        <Border Grid.Row="1"
                Margin="5"
                CornerRadius="5"
                BorderThickness="1"
                BorderBrush="#FFDDDDDD"
                Background="White">
            <DataGrid x:Name="VoyagesDataGrid"
                     AutoGenerateColumns="False"
                     CanUserAddRows="False"
                     SelectionMode="Single"
                     IsReadOnly="True"
                     HeadersVisibility="Column"
                     RowHeaderWidth="0"
                     GridLinesVisibility="None"
                     ScrollViewer.CanContentScroll="True"
                     ScrollViewer.VerticalScrollBarVisibility="Auto"
                     ScrollViewer.HorizontalScrollBarVisibility="Auto">

                <DataGrid.Columns>
                    <!-- Colonnes avec style cohérent -->
                    <DataGridTextColumn Width="150"
                                        Binding="{Binding _destination}"
                                        Header="Destination"
                                        HeaderStyle="{StaticResource DataGridColumnHeaderStyle}" />

                    <DataGridTextColumn Width="200"
                                       Binding="{Binding _description}"
                                       Header="Description"
                                       HeaderStyle="{StaticResource DataGridColumnHeaderStyle}" />

                    <DataGridTextColumn Width="100"
                                       Binding="{Binding _date}"
                                       Header="Date"
                                       HeaderStyle="{StaticResource DataGridColumnHeaderStyle}" />

                    <DataGridTextColumn Width="100"
                                       Binding="{Binding _price}"
                                       Header="Prix"
                                       HeaderStyle="{StaticResource DataGridColumnHeaderStyle}" />

                    <!-- Colonne Image avec bouton stylisé -->
                    <DataGridTemplateColumn Width="150"
                                           Header="Image"
                                           HeaderStyle="{StaticResource DataGridColumnHeaderStyle}">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal"
                                            VerticalAlignment="Center"
                                            HorizontalAlignment="Center">
                                    <Image Width="50"
                                           Height="50"
                                           Source="{Binding _image}"
                                           Stretch="UniformToFill" />
                                    <Button Click="ImportImage_Click"
                                            DataContext="{Binding}"
                                            Content="Importer"
                                            Style="{StaticResource SecondaryButton}"
                                            Margin="10,0,0,0" />
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <!-- Colonne Suppression -->
                    <DataGridTemplateColumn Width="120"
                                           Header="Supprimer"
                                           HeaderStyle="{StaticResource DataGridColumnHeaderStyle}">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox IsChecked="{Binding _delete}"
                                          HorizontalAlignment="Center"
                                          VerticalAlignment="Center"
                                          Style="{StaticResource ModernCheckBox}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>

                <DataGrid.RowStyle>
                    <Style TargetType="DataGridRow">
                        <Setter Property="Background" Value="White" />
                        <Setter Property="BorderBrush" Value="#FFEEEEEE" />
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FFF5F5F5" />
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="#FFE3F2FD" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.RowStyle>
            </DataGrid>
        </Border>

        <!-- Barre de boutons avec style amélioré -->
        <Border Grid.Row="2"
                Background="White"
                CornerRadius="0,0,5,5"
                Padding="10"
                Margin="5,0,5,5"
                BorderThickness="0,1,1,1"
                BorderBrush="#FFDDDDDD">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Width="120"
                        Height="35"
                        Style="{StaticResource PrimaryButton}"
                        Click="SaveVoyages_Click"
                        Content="Enregistrer" />
                <Button Width="100"
                        Height="35"
                        Margin="10,0,0,0"
                        Style="{StaticResource SecondaryButton}"
                        Click="Retour_Click"
                        Content="Retour" />
            </StackPanel>
        </Border>
    </Grid>
</Window>